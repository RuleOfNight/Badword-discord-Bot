
# $ git add .
# $ git commit -am "make it better"
# $ git push heroku master
# git add requirements.txt
# git commit -m "Fix requirements.txt"
# git push heroku master

import discord
from discord.ext import commands
import asyncio
import os

intents = discord.Intents.default()
intents.message_content = True
intents.members = True
client = commands.Bot(command_prefix='!', intents=intents)

TOKEN = '' #T·ª± l·∫•y token ·ªü dev portal
MUTE_ROLE_NAME = 'T√π Nh√¢n' #T√™n role mute
MUTE_TIME = 18000 #Time mute t√≠nh theo gi√¢y

# Danh s√°ch t·ª´ c·∫•m
bad_words = ['ch·ªã 7', 'chj 7', 'c·ªã 7', 'cj 7', 'Ch·ªã 7', 'Chj 7', 'C·ªã 7', 'Cj 7', 'ch·ªã b·∫£i', 'ch·ªã B·∫£i', 'Ch·ªã b·∫£i', 'chj B·∫£i', 'Chj b·∫£i', 'Chj B·∫£i', 'c·ªã B·∫£i', 'C·ªã b·∫£i', 'C·ªã B·∫£i', 'cj B·∫£i', 'Cj b·∫£i', 'Cj B·∫£i', 'ch·ªã 7', 'chj 7', 'c·ªã 7', 'cj 7', 'Ch·ªã 7', 'Chj 7', 'C·ªã 7', 'Cj 7', 'ch·ªã b·∫£y', 'ch·ªã B·∫£y', 'Ch·ªã b·∫£y', 'chj B·∫£y', 'Chj b·∫£y', 'Chj B·∫£y', 'c·ªã B·∫£y', 'C·ªã b·∫£y', 'C·ªã B·∫£y', 'cj B·∫£y', 'Cj b·∫£y', 'Cj B·∫£y', 'chi7', 'Chi7', 'ch·ªã7', 'Ch·ªã7', 'Ch! B·∫£i', '7 onee san', '7 onee chan', 'ch·ª•y p·∫£y','üë©‚Äçü¶∞ 7Ô∏è‚É£', 'c  h ·ªã 7', 'Ch ·ªã 7', 'Mommy 7', '„Ñ• ·ªã…•…î', 'Sister Seven', 'c√¥   7', 'c√¥ 7', 'B√† 7', 'ch·ªã ‚ë¶', 'Ch·ª•y B·∫©y', 'sis 7', 'ch·ªã  th·∫•t', 'ch·ªã th·∫•t', 'Nee-san 7', 'Ch·ªµ 7', 'Chu·ªµ 7', 'Chy 7', 'chy 7', 'ch·ªµ 7', '715 onee san', 'Chyii 7', 'b·∫£y onee-chan', 'Chijjjjj 7', 'Chijjjj 7', 'Chijjj 7', 'Chijj 7', 'Chij 7', 'Th·∫•t t·ªâ', 'ch·ªã 77', 'ch·ªã bo·∫£i', 'Th·∫•t t·ªâ', 'Ch·ªã th·∫•t', 'ch·ªã sen v·ª´n', 'ch·ªã se v·ª´n', 'ch·ªã se v·∫±n', '7 ch·ªã', 'sist 7', 'Th√≠m ba?y', 'Chuy. B·∫£y', 'Th·∫•t ch·ªã?', 'B√© b·∫£j', 'Ch·∫£y b·ªã', 'üö∫7Ô∏è‚É£', 'Ch! 7', 'C√¥-7', 'Ch·ªã¬∞7', '7 oneesan', '7 oneechan', 'One san 7', 'one san 7', 'C h ·ªã.    B. ·∫¢ y', 'sister 7', '7 sister', '7 oneesan', 'em g√°i 7', 'em 7', 'g√°i 7', 'Ch·ªã‚ô•7', ' —Åh·ªã 7', 'Ch·ªã ‚Ä¢ 7', 'Chij‚Ä¢ b·∫£y', 'Ch·ªã‚Ä¢üïñ', 'üïñ', 'ch·ªã VII', 'sister th·∫•t', 'Th·∫•t s∆∞ t·ª∑', 'Ch·ªã bay?', 'Th·∫•t t·ª∑', 'th·∫•t t·ª∑', 'Th·∫•t mu·ªôi', 'th·∫•t mu·ªôi', '7 nee san', '7 onee sama', 'b·∫£i onee chan', '7 chan', 'Ane 7', '–°H·ªä –í·∫¢Y', 'oneeee_chan 7', 'ch·ªã  7','e6s5 n√≥i g√¨ c≈©ng ƒë√∫ng','E6s5 n√≥i g√¨ c≈©ng ƒë√∫ng','E6S5 n√≥i g√¨ c≈©ng ƒë√∫ng','e6s5 l√≥i g√¨ c≈©ng ƒë√∫ng','e6s5 n√≥i g√¨ c≈©ng ƒë√∫n','e6s5 l√≥i g√¨ c≈©ng ƒë√∫n','e6 n√≥i g√¨ c≈©ng ƒë√∫ng','E6 n√≥i g√¨ c≈©ng ƒë√∫ng','Ng∆∞·ªùi gi√†u n√≥i g√¨ c≈©ng ƒë√∫ng','c6r5 n√≥i g√¨ c≈©ng ƒë√∫ng','C6r5 n√≥i g√¨ c≈©ng ƒë√∫ng','C6R5 n√≥i g√¨ c≈©ng ƒë√∫ng','b·ªë h√®n','b·ªë P h√®n','b·ªë p h√®n','p·ªë h√®n','P·ªë h√®n','P·ªë p h√®n','P·ªë P h√®n','p·ªë P h√®n','b·ªë Phong h√®n','b·ªë phong h√®n','bp h√®n','Bp h√®n','BP h√®n','Anh phong h√®n','Anh P h√®n','anh phong h√®n','Anh Phong h√®n','anh p h√®n','anh P h√®n','anh phong h√®n','anh Phong h√®n','b·ªë h√®n','B·ªë h√®n','√¥ng P h√®n','√¥ng p h√®n','√îng p h√®n','√îng P h√®n','og p h√®n','Og p h√®n','og P h√®n','Og P h√®n','b·ªë ph h√®n','B·ªë ph h√®n','b·ªë phong H h√®n','b·ªë Phong H h√®n','b·ªë Phong h h√®n','B·ªë phong h h√®n','a Phong h√® n','T·ª∑ seven']

@client.event
async def on_ready():
    print(f'{client.user} ƒë√£ s·∫µn s√†ng')

@client.command(name='add', help='Ch·ªâ admin c√≥ th·ªÉ s·ª≠ d·ª•ng.')
@commands.has_permissions(administrator=True)
async def add_bad_word(ctx, *, word):
    bad_words.append(word.lower())  #add
    await ctx.send(f'ƒê√£ th√™m t·ª´ c·∫•m: `{word}` v√†o danh s√°ch.')

# C·∫≠p nh·∫≠t h√†m on_message
async def check_bad_words(message):
    if any(word in message.content.lower() for word in bad_words):
        await mute_user(message.author, message.channel)

@client.event
async def on_message(message):
    if message.author == client.user:
        return

    if message.channel.name == 'üçÄ„Ä¢chat-chung':
        if any(word in message.content.lower() for word in bad_words):
            await mute_user(message.author, message.channel)

    await check_bad_words(message)
    await client.process_commands(message)

WHITELISTED_ROLES = ['Demon Slime', 'Ngo√†i v√≤ng ph√°p lu·∫≠t', 'Mod', 's∆°n m√†u tƒÉng luck', 'üëëFriendly Artistüëë', 'Whitelist', '‚ú®']

async def mute_user(user, channel):
    guild = user.guild
    mute_role = discord.utils.get(guild.roles, name=MUTE_ROLE_NAME)

    if not mute_role:
        mute_role = await guild.create_role(name=MUTE_ROLE_NAME)
        for ch in guild.channels:
            await ch.set_permissions(mute_role, send_messages=False)

    await user.add_roles(mute_role)
    print(f'{user.display_name} ƒë√£ b·ªã mute.')

    mute_message = await channel.send(f'{user.mention} ƒë√£ b·ªã l√†m gi·∫£ l·∫≠p ng∆∞·ªùi c√¢m trong 30p')

    if any(role.name in WHITELISTED_ROLES for role in user.roles):
        await user.remove_roles(mute_role)
        await mute_message.delete()
        await channel.send(f'{user.mention} kh√¥ng b·ªã ch·ªçn l√†m m·ª•c ti√™u.')
        print(f'{user.display_name} ƒë∆∞·ª£c g·ª° b·ªè mute do c√≥ trong danh s√°ch whitelist.')
        return

    await asyncio.sleep(MUTE_TIME)
    if mute_role in user.roles:
        await user.remove_roles(mute_role)
        print(f'{user.display_name} ƒë√£ ƒë∆∞·ª£c h·ªßy mute.')

client.run(TOKEN)
